/*!
 * @license
 * yii2-queue-manager-client 0.1.1 <https://github.com/somov/yii2-queue-manager-client#readme>
 * Copyright: somov.nn@gmail.com
 * Licensed under MIT
 */
!function(e,t,n){function r(e){return e&&'object'==typeof e&&'default'in e?e:{default:e}}var a=r(e),i=r(t),s=r(n);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function u(e){if(void 0===e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,c(e,t)}function h(e,t,n){if(!t.has(e))throw new TypeError('attempted to '+n+' private field on non-instance');return t.get(e)}function d(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError('attempted to set read only private field');t.value=n}}(e,h(e,t,'set'),n),n}function p(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,h(e,t,'get'))}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}for(var m,g={prefixed:!0},y=[['requestFullscreen','exitFullscreen','fullscreenElement','fullscreenEnabled','fullscreenchange','fullscreenerror','fullscreen'],['webkitRequestFullscreen','webkitExitFullscreen','webkitFullscreenElement','webkitFullscreenEnabled','webkitfullscreenchange','webkitfullscreenerror','-webkit-full-screen'],['mozRequestFullScreen','mozCancelFullScreen','mozFullScreenElement','mozFullScreenEnabled','mozfullscreenchange','mozfullscreenerror','-moz-full-screen'],['msRequestFullscreen','msExitFullscreen','msFullscreenElement','msFullscreenEnabled','MSFullscreenChange','MSFullscreenError','-ms-fullscreen']],w=y[0],b=0;b<y.length;b++)if(y[b][1]in i.default){m=y[b];break}if(m){for(var E=0;E<m.length;E++)g[w[E]]=m[E];g.prefixed=m[0]!==w[0]}var k=Object.prototype.toString;function T(e,t){(e=>C(e)?Object.keys(e):[])(e).forEach((n=>t(e[n],n)))}function C(e){return!!e&&'object'==typeof e}function N(e,t){if(!e||!t)return'';if('function'==typeof s.default.getComputedStyle){var n=s.default.getComputedStyle(e);return n?n.getPropertyValue(t)||n[t]:''}return''}var x,O=s.default.navigator&&s.default.navigator.userAgent||'',A=/AppleWebKit\/([\d.]+)/i.exec(O);A&&parseFloat(A.pop()),/iPod/i.test(O),(x=O.match(/OS (\d+)_/i))&&x[1]&&x[1];var M=/Android/i.test(O);(()=>{var e=O.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);t&&n&&parseFloat(e[1]+'.'+e[2])})(),/Firefox/i.test(O);var S,P=/Edg/i.test(O),W=!P&&(/Chrome/i.test(O)||/CriOS/i.test(O));(()=>{var e=O.match(/(Chrome|CriOS)\/(\d+)/);e&&e[2]&&parseFloat(e[2])})(),S=/MSIE\s(\d+)\.\d/.exec(O),!(S&&parseFloat(S[1]))&&/Trident\/7.0/i.test(O)&&/rv:11.0/.test(O);var _=/Safari/i.test(O)&&!W&&!M&&!P;/Windows/i.test(O);var R,L=Boolean(i.default===s.default.document&&('ontouchstart'in s.default||s.default.navigator.maxTouchPoints||s.default.DocumentTouch&&s.default.document instanceof s.default.DocumentTouch));/iPad/i.test(O)||_&&L&&/iPhone/i.test(O);function j(e){return'string'==typeof e&&Boolean(e.trim())}function I(e){if(e.indexOf(' ')>=0)throw new Error('class has illegal whitespace characters')}function q(e){return C(e)&&1===e.nodeType}function F(e){return(t,n)=>{if(!j(t))return i.default[e](null);j(n)&&(n=i.default.querySelector(n));var r=q(n)?n:i.default;return r[e]&&r[e](t)}}function z(e,t,n,r){void 0===e&&(e='div'),void 0===t&&(t={}),void 0===n&&(n={});var a=i.default.createElement(e);return Object.getOwnPropertyNames(t).forEach((e=>{var n=t[e];-1!==e.indexOf('aria-')||'role'===e||'type'===e?a.setAttribute(e,n):'style'===e&&'object'==typeof n?Object.getOwnPropertyNames(n).forEach((e=>{a.style[e]=n[e]})):'textContent'===e?function(e,t){void 0===e.textContent?e.innerText=t:e.textContent=t}(a,n):a[e]===n&&'tabIndex'!==e||(a[e]=n)})),Object.getOwnPropertyNames(n).forEach((e=>{a.setAttribute(e,n[e])})),r&&function(e,t){(function(e){'function'==typeof e&&(e=e());return(Array.isArray(e)?e:[e]).map((e=>('function'==typeof e&&(e=e()),q(e)||function(e){return C(e)&&3===e.nodeType}(e)?e:'string'==typeof e&&/\S/.test(e)?i.default.createTextNode(e):void 0))).filter((e=>e))})(t).forEach((t=>e.appendChild(t)))}(a,r),a}function D(e,t){return I(t),e.classList?e.classList.contains(t):(n=t,new RegExp('(^|\\s)'+n+'($|\\s)')).test(e.className);var n}function B(e,t){return e.classList?e.classList.add(t):D(e,t)||(e.className=(e.className+' '+t).trim()),e}function $(e,t){return e.classList?e.classList.remove(t):(I(t),e.className=e.className.split(/\s+/).filter((e=>e!==t)).join(' ')),e}function H(e,t){e.removeAttribute(t)}function X(e,t,n,r){void 0===r&&(r=function(e){return e.startsWith(n)?e:''});var a='';e.classList.forEach((e=>{0===a.length&&(a=r(e))})),a!==t&&(a.length>0&&$(e,a),B(e,t))}/iPhone/i.test(O),(R=Element.prototype).matches=R.matches||R.mozMatchesSelector||R.msMatchesSelector||R.oMatchesSelector||R.webkitMatchesSelector,R.closest=R.closest||function(e){return this?this.matches(e)?this:this.parentElement?this.parentElement.closest(e):null:null};var G=F('querySelector'),U=F('querySelectorAll');function V(e,t){var n='undefined'!=typeof Symbol&&e[Symbol.iterator]||e['@@iterator'];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if('string'==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);'Object'===n&&e.constructor&&(n=e.constructor.name);if('Map'===n||'Set'===n)return Array.from(e);if('Arguments'===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e))||t&&e&&'number'==typeof e.length){n&&(e=n);var r=0;return()=>r>=e.length?{done:!0}:{done:!1,value:e[r++]}}throw new TypeError('Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K=(()=>{function e(){}e.removeOptionsPtoperty=function(e,t,n){if(void 0===n&&(n=Element),t[e]instanceof n==!1)throw Error('Invalid call. Property '+e+' is not valid');var r=t[e];return delete t[e],r};var t=e.prototype;return t.createEl=function(t,n,r,a){if(void 0===t&&(t='div'),void 0===n&&(n={}),void 0===r&&(r={}),void 0!==n.className){var i=new Set;('string'==typeof n.className?n.className.split(' '):n.className).forEach((e=>i.add(e)));for(var s,o='',l=V(i);!(s=l()).done;){var u=s.value;o+=' '+e.getClassName(u)}n.className=o.trim()}return z(t,n,r,a)},e._normalizePrefix=function(t){return t.replace(new RegExp('\\.','g'),'$&'+e.classPrefix)},t.$=function(t,n){return t=e._normalizePrefix(t),G(t,n)},t.$$=function(t,n){return t=e._normalizePrefix(t),U(t,n)},e})();v(K,{classPrefix:null,getClassName:function(e){return null===this.classPrefix||e.startsWith(this.classPrefix)?e:this.classPrefix+e}});var Q,J=(((e,t)=>{var n;n=e=>{e.version='1.2.0';var t=(()=>{for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return'undefined'!=typeof Int32Array?new Int32Array(t):t})();e.table=t,e.bstr=(e,n)=>{for(var r=-1^n,a=e.length-1,i=0;i<a;)r=(r=r>>>8^t[255&(r^e.charCodeAt(i++))])>>>8^t[255&(r^e.charCodeAt(i++))];return i===a&&(r=r>>>8^t[255&(r^e.charCodeAt(i))]),-1^r},e.buf=(e,n)=>{if(e.length>1e4)return((e,n)=>{for(var r=-1^n,a=e.length-7,i=0;i<a;)r=(r=(r=(r=(r=(r=(r=(r=r>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])];for(;i<a+7;)r=r>>>8^t[255&(r^e[i++])];return-1^r})(e,n);for(var r=-1^n,a=e.length-3,i=0;i<a;)r=(r=(r=(r=r>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])])>>>8^t[255&(r^e[i++])];for(;i<a+3;)r=r>>>8^t[255&(r^e[i++])];return-1^r},e.str=(e,n)=>{for(var r,a,i=-1^n,s=0,o=e.length;s<o;)(r=e.charCodeAt(s++))<128?i=i>>>8^t[255&(i^r)]:r<2048?i=(i=i>>>8^t[255&(i^(192|r>>6&31))])>>>8^t[255&(i^(128|63&r))]:r>=55296&&r<57344?(r=64+(1023&r),a=1023&e.charCodeAt(s++),i=(i=(i=(i=i>>>8^t[255&(i^(240|r>>8&7))])>>>8^t[255&(i^(128|r>>2&63))])>>>8^t[255&(i^(128|a>>6&15|(3&r)<<4))])>>>8^t[255&(i^(128|63&a))]):i=(i=(i=i>>>8^t[255&(i^(224|r>>12&15))])>>>8^t[255&(i^(128|r>>6&63))])>>>8^t[255&(i^(128|63&r))];return-1^i}},'undefined'==typeof DO_NOT_EXPORT_CRC?n(t):n({})})(Q={exports:{}},Q.exports),Q.exports);function Z(e){return e&&'object'==typeof e&&!Array.isArray(e)}function ee(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;var a=n.shift();if(Z(e)&&Z(a))for(var i in a){var s,o;if(Z(a[i]))e[i]||v(e,((s={})[i]={},s)),ee(e[i],a[i]);else v(e,((o={})[i]=a[i],o))}return ee.apply(void 0,[e].concat(n))}var te={INIT:-1,WAIT:0,EXEC:1,DONE:2,ERROR:3,DELETED:99};function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e,t,n){return function(e,t){if(e!==t)throw new TypeError('Private static access of wrong provenance')}(e,t),function(e,t){if(void 0===e)throw new TypeError('attempted to '+t+' private static field before its declaration')}(n,'get'),function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}function ae(e,t,n){if(!t.has(e))throw new TypeError('attempted to get private field on non-instance');return n}te.SET_VISIBLE=[te.WAIT,te.EXEC,te.ERROR,te.DONE],te.SET_COMPLETE=[te.DONE,te.ERROR,te.DELETED],te.is=(e,t)=>e.indexOf(t)>-1;var ie=new WeakMap,se=new WeakMap,oe=new WeakSet,le=function(e){function t(t,n){var r;return r=e.call(this)||this,oe.add(u(r)),ie.set(u(r),{writable:!0,value:null}),ne(u(r),'id',void 0),ne(u(r),'common',!1),ne(u(r),'initiatorManager',void 0),ne(u(r),'progress',0),ne(u(r),'text',''),ne(u(r),'title',''),ne(u(r),'status',te.INIT),se.set(u(r),{writable:!0,value:null}),r.id=parseInt(t),d(u(r),ie,n),r}f(t,e);var n=t.prototype;return n._renderChild=function(e){},n._buildCssClass=function(){return['task-item']},n.cssClassSwitch=function(){var e=ae(this,oe,ue).call(this);if('object'==typeof this.manager.options.theme){var n=this.manager.options.theme[this.status]||!1;n&&X(e,t.getClassName('theme-'+n),t.getClassName('theme'))}X(e,re(t,t,ce).call(t)[this.status],t.getClassName('status'))},n.refresh=function(e,t){void 0===t&&(t=null),ae(this,oe,ue).call(this),t&&this._refreshElements(t,e)},n.getProgressTotal=function(e){void 0===e&&(e='progress');var t=0;return this.hasOwnProperty(e)&&'object'==typeof(t=this[e])&&t.length&&(t=Math.round(t.reduce(((e,t)=>e+t))/t.length,0)),t},n._refreshElements=function(e,t){var n=this,r=this.options.parts;Object.keys(e).forEach((a=>{var i=r[a],s='refreshBasicProperty';if('string'==typeof i){if(i.indexOf('.')>0){var o=i.split('.'),l=o[0],u=o[1];s=l+u[0].toUpperCase()+u.slice(1),i=u}var c=void 0!==n[i]?n[i]:null;c!==(void 0!==t[i]?t[i]:null)&&'function'==typeof n[s='_'+s]&&n[s].call(n,e[a],c,i)}}))},n._refreshBasicProperty=function(e,n,r){if(Array.isArray(n)){var a=t.getClassName('list-'+r),i=G('ul.'+a,e);null===i&&(i=this.createEl('ul',{className:a}),e.append(i)),n.forEach(((e,t)=>{var n=G('li:nth-child('+(t+1)+')',i);null===n?i.append(z('li',{},{},e)):n.innerText!==e&&(n.innerText=e)}))}else e.innerHTML=n},n.getTitle=function(){return''},n.toString=function(){return this.statusText+' '+this.getTitle()},l(t,[{key:'manager',get:function(){return p(this,ie)}},{key:'element',get:function(){return p(this,se)}},{key:'options',get:function(){return this.manager.options.taskOptions}},{key:'statusText',get:function(){return this.manager.options.statusText[this.status]||''}}]),t}(K);function ue(){if(p(this,se))return p(this,se);var e=d(this,se,this.createEl('div',{className:'wrapper'},{'data-task-id':this.id})),t=this.createEl('div',{className:this._buildCssClass()});return this._renderChild(t),e.append(t),e}var ce={writable:!0,value:function(){if(this._cssList)return this._cssList;for(var e in this._cssList={},te)'number'==typeof te[e]&&(this._cssList[te[e]]=K.getClassName('status-'+e.toLowerCase()));return this._cssList}};function fe(e,t,n){return he(e,t),function(e,t){if(void 0===e)throw new TypeError('attempted to '+t+' private static field before its declaration')}(n,'get'),function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}function he(e,t){if(e!==t)throw new TypeError('Private static access of wrong provenance')}function de(e,t,n){if(!t.has(e))throw new TypeError('attempted to get private field on non-instance');return n}var pe='__EMPTY__',ve={method:'post',delayTime:1e3,params:{}},me=new WeakMap,ge=new WeakMap,ye=new WeakMap,we=new WeakSet,be=new WeakSet,Ee=new WeakSet,ke=function(){function e(e){Ee.add(this),be.add(this),we.add(this),me.set(this,{writable:!0,value:[]}),ge.set(this,{writable:!0,value:void 0}),ye.set(this,{writable:!0,value:-1});var t,n=d(this,ge,ee({},ve,e));n.params&&(C(t=n.params)&&'[object Object]'===k.call(t)&&t.constructor===Object)&&(n.params=Object.entries(n.params).map((e=>e[0]+'='+e[1])))}var t=e.prototype;return t.resolve=function(e,t){var n=this;if(!1===this.isRunning){var r=de(this,Ee,xe).call(this);d(this,ye,0),r.forEach((t=>e(t))),de(this,we,Te).call(this,0).catch((e=>{})).then((()=>{var e=p(n,ye);return r.forEach((n=>t(n,e))),d(n,ye,-1),e}))}},t.findTasks=function(e){return this.tasks.filter((t=>t.id===e))},e.factory=function(t){var n=t.options.resolver,r=J.str(n.url),a=fe(e,e,Oe),i=fe(e,e,Ae),s=a[r]=a[r]instanceof e?a[r]:new e(n),o=de(s,Ee,xe).call(s);return-1===o.indexOf(t)&&(o.push(t),t.options.common&&i.push(t),t.ownerElement.addEventListener(Xt.Events.destroy,(e=>{var t=o.indexOf(e.manager);t>-1&&(i.forEach((e=>{e.getTasks().filter((e=>e.initiatorManager===o[t])).forEach((t=>{e.removeTask(t)}))})),o.splice(t,1)),(t=i.findIndex((t=>t===e.manager)))>-1&&i.splice(t,1)}))),s},l(e,[{key:'tasks',get:function(){var e=[];return p(this,me).forEach((t=>{t.getTasks().forEach((t=>{!1===t.common&&e.push(t)}))})),e}},{key:'tasksId',get:function(){return this.tasks.map((e=>e.id)).filter(((e,t,n)=>n.indexOf(e===t)))}},{key:'options',get:function(){return p(this,ge)}},{key:'isRunning',get:function(){return p(this,ye)>-1}}]),e}();function Te(e){var t=this;return void 0===e&&(e=this.options.delayTime),de(this,be,Ne).call(this,e).then((e=>{if(!1===e.ok)throw Error(e.status+' - '+e.statusText+'\' ');return e.json().then((e=>{var n,r,a;return e.length>0&&(e.forEach((e=>{t.findTasks(e.id).forEach((t=>{t.manager._updateTask(t,e)}))})),(n=ke,r=ke,a=Ce,he(n,r),a).call(ke,e,t)),de(t,we,Te).call(t)}))}))}function Ce(e,t){fe(ke,ke,Ae).forEach((n=>{e.forEach((e=>{var r,a=n.findTask(e.id);null===a&&!1===te.is(te.SET_COMPLETE,e.status)&&(e.common=!0,n.addTasks([e.id],!1),a=n.findTask(e.id),n._updateTask(a,e),a.initiatorManager=null==(r=t.tasks.find((t=>t.id===e.id)))?void 0:r.manager);a instanceof le&&a.common&&n._updateTask(a,e)}))}))}function Ne(e){var t=this;return new Promise(((n,r)=>{var a=t.tasksId;0===a.length?r(pe):setTimeout((()=>n(a)),e)})).then((e=>{d(t,ye,+p(t,ye)+1);var n=e.map((e=>'t[]='+e)),r=t.options.params;return Array.isArray(r)&&r.length>0&&(n=n.concat(r)),fetch(t.options.url,ee({},t.options,{method:'post',headers:{'Content-type':'application/x-www-form-urlencoded'},body:encodeURI(n.join('&'))}))}))}function xe(e){return void 0===e&&(e=!1),!1===e?p(this,me):p(this,me).filter((e=>!0===e.options.common))}var Oe={writable:!0,value:[]},Ae={writable:!0,value:[]},Me={ready:'qmc:manager:ready',destroy:'qmc:manager:destroy',statusChange:'qmc:manager:statusChange',taskRemoved:'qmc:manager:taskRemoved',taskElementRemoved:'qmc:manager:taskElementRemoved',newTask:'qmc:manager:newTask',fetchStart:'qmc:resolver:start',fetchEnd:'qmc:resolver:end'};function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(){if('undefined'==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if('function'==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(()=>{}))),!0}catch(e){return!1}}function We(e,t,n){return(We=Pe()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&c(a,n.prototype),a}).apply(null,arguments)}function _e(e){var t='function'==typeof Map?new Map:void 0;return(_e=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf('[native code]')}(e))return e;if('function'!=typeof e)throw new TypeError('Super expression must either be null or a function');if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return We(e,arguments,Se(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)})(e)}Me.toString=function(){var e=[];return T(this,(t=>{e.push(t)})),e.join(' ')};var Re,Le=new WeakMap,je=function(e){function t(t,n,r){var a;return a=e.call(this,n,r)||this,Le.set(u(a),{writable:!0,value:null}),d(u(a),Le,t),a}return f(t,e),l(t,[{key:'manager',get:function(){return p(this,Le)}}]),t}(_e(CustomEvent)),Ie=3;s.default.WeakMap||(Re=function(){function e(){this.vdata='vdata'+Math.floor(s.default.performance&&s.default.performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var n=e[this.vdata]||Ie++;return e[this.vdata]||(e[this.vdata]=n),this.data[n]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t]},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var qe=s.default.WeakMap?new WeakMap:new Re;var Fe=new WeakMap,ze=new WeakMap,De=new WeakMap,Be=new WeakSet,$e=function(e){function t(){var n;n=e.call(this)||this,Be.add(u(n)),ne(u(n),'label',''),ne(u(n),'className',t.getClassName('progress')),ne(u(n),'size',null),Fe.set(u(n),{writable:!0,value:[]}),ne(u(n),'barOptions',{}),ze.set(u(n),{writable:!0,value:null}),De.set(u(n),{writable:!0,value:null}),ne(u(n),'isShowGradient',!0);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return ee.apply(void 0,[u(n)].concat(a)),n}f(t,e);var n=t.prototype;return n.render=function(){var e=p(this,De);if(e instanceof HTMLElement)return e;var n=this.className;return this.size&&(n+=' '+t.getClassName('size-'+this.size)),!1===this.isShowGradient&&(n+=' '+t.getClassName('no-gradient')),e=z('div',{className:n},{},z('div',{className:t.getClassName('progress-items')})),d(this,De,e)},n.setProgress=function(e){var n=this,r=p(this,Fe),a=p(this,De);e.length,(e='number'==typeof e?[e]:e).forEach(((e,i)=>{r[i]instanceof Ue?r[i].progress=e:(r[i]=new Ue(n.barOptions,{progress:e}),a.querySelector('.'+t.getClassName('progress-items')).append(z('div',{className:t.getClassName('progress-item')},{},r[i].render())))}));var i=t.getClassName('more-than-three');!1===D(a,i)&&e.length>3&&B(a,i)},n.setLabel=function(e){e&&(function(e,t,n){if(!t.has(e))throw new TypeError('attempted to get private field on non-instance');return n}(this,Be,He).call(this).innerHTML=e)},t}(K);function He(){var e=p(this,ze);return e instanceof Element||(d(this,ze,e=z('span',{className:$e.getClassName('progress-label')},{})),p(this,De).append(e)),e}ne($e,'$classPrefix',null);var Xe=new WeakMap,Ge=new WeakMap,Ue=function(){function e(){Xe.set(this,{writable:!0,value:!1}),ne(this,'className','progress-bar'),Ge.set(this,{writable:!0,value:0}),ne(this,'labelText',''),ne(this,'min',0),ne(this,'max',100);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ee.apply(void 0,[this].concat(t))}return e.prototype.render=function(){var e=p(this,Xe);if(e)return e;var t=[];return!1===this.labelText?t.push(z('span',{className:'sr-only',css:{width:0}},{},this.label)):t=this.label,d(this,Xe,e=z('div',{className:$e.getClassName(this.className)},{role:'progressbar','aria-valuenow':this.progress,'aria-valuemin':this.min,'aria-valuemax':this.max},t)),e},l(e,[{key:'label',get:function(){var e=this.labelText?this.labelText:'';return this.progress+'% '+e}},{key:'progress',get:function(){return p(this,Ge)},set:function(e){d(this,Ge,e);var t=this.render();t.setAttribute('aria-valuenow',e),t.childNodes.length>0?t.childNodes[0].textContent=this.label:t.textContent=this.label,t.style.width=e+'%'}}]),e}();function Ve(e,t,n){if(!t.has(e))throw new TypeError('attempted to get private field on non-instance');return n}var Ye=new WeakMap,Ke=new WeakMap,Qe=new WeakMap,Je=new WeakSet,Ze=function(e){function t(t,n){var r;return void 0===t&&(t=!1),void 0===n&&(n=!1),r=e.call(this)||this,Je.add(u(r)),Ye.set(u(r),{writable:!0,value:void 0}),Ke.set(u(r),{writable:!0,value:!1}),Qe.set(u(r),{writable:!0,value:!1}),d(u(r),Ke,t),d(u(r),Qe,n),r}return f(t,e),t.prototype.render=function(){var e=p(this,Ye);return e instanceof Element?e:d(this,Ye,this.createEl('span',{className:Ve(this,Je,et).call(this)},{},z('span',{},{},['s1','s2','s3'].map((e=>z('span',{className:e}))))))},l(t,[{key:'icon',set:function(e){if(e){var t=p(this,Ke);if(t!==e){var n=p(this,Ye);t&&$(n,t),B(n,e),d(this,Ke,e)}}}},{key:'size',set:function(e){if(e){e=t.getClassName('size-'+e);var n=p(this,Qe);if(n!==e){var r=p(this,Ye);n&&$(r,n),B(r,e),d(this,Qe,e)}}}},{key:'color',set:function(e){U('span[class^=s]',p(this,Ye)).forEach((t=>{t.style.backgroundColor=e}))}}]),t}(K);function et(){var e='icon-t',t=[];return p(this,Ke)&&(e+=' '+p(this,Ke)),t.push(e),p(this,Qe)&&t.push('size-'+p(this,Qe)),t}function tt(e,t,n){return function(e,t){if(e!==t)throw new TypeError('Private static access of wrong provenance')}(e,t),n}var nt={tagName:'button',handler:null,handlerTimoutDelay:500,label:!1,hiddenLabel:'',disabled:!1,size:null,iconName:null,iconHoverName:null,iconSize:null,animatedClick:!0,data:{}},rt=new WeakMap,at=new WeakMap,it=new WeakMap,st=new WeakSet,ot=function(e){function t(t){var n;return n=e.call(this)||this,st.add(u(n)),rt.set(u(n),{writable:!0,value:void 0}),at.set(u(n),{writable:!0,value:nt}),it.set(u(n),{writable:!0,value:null}),t&&'object'==typeof t&&d(u(n),at,ee({},nt,t)),n}return f(t,e),t.prototype.render=function(){var e=p(this,rt);if(e instanceof Element)return e;var n=this.options,r=[];if(n.iconName){var a=this.icon;r.push(a.render()),a.icon=n.iconName,a.size=n.iconSize}if(n.label&&r.push(z('p',{},{},n.label)),n.hiddenLabel&&r.push(this.createEl('p',{className:'button-hidden'},{},n.hiddenLabel)),n.animatedClick){var i=z('p',{className:'drop'});i.addEventListener('animationend',(function(){$(this,'animate')})),r.push(i)}return e=d(this,rt,this.createEl(n.tagName,{className:tt(t,t,lt).call(t,n)},{},r)),this.disabled=n.disabled,function(e,t,n){if(!t.has(e))throw new TypeError('attempted to get private field on non-instance');return n}(this,st,ut).call(this,e,n),e},l(t,[{key:'disabled',set:function(e){var t=this.options;e!==t.disabled&&('button'===t.tagName.toLowerCase()?p(this,rt).disabled=e:function(e,t,n){var r=D(e,t);if('function'==typeof n&&(n=n(e,t)),'boolean'!=typeof n&&(n=!r),n!==r)n?B(e,t):$(e,t)}(p(this,rt),'disabled'),t.disabled=e)}},{key:'options',get:function(){return p(this,at)}},{key:'element',get:function(){return this.render()}},{key:'icon',get:function(){var e=p(this,it);return e instanceof Ze?e:d(this,it,new Ze)}}]),t}(K);function lt(e){var t=['button'];return e.size&&t.push('size-'+e.size),e.hiddenLabel&&t.push('has-hidden'),t}function ut(e,t){var n=this;e.addEventListener('click',(n=>{if(t.disabled)return n.stopImmediatePropagation(),!1;t.animatedClick&&tt(ot,ot,ct).call(ot,e)})),'function'==typeof t.handler&&(t.handlerTimoutDelay>0?e.addEventListener('click',(e=>{setTimeout((()=>t.handler.call(n,e)),t.handlerTimoutDelay)})):e.addEventListener('click',t.handler.bind(this))),t.iconHoverName&&(e.addEventListener('mouseenter',(()=>{!1===t.disabled&&(n.icon.icon=t.iconHoverName)})),e.addEventListener('mouseleave',(()=>{n.icon.icon=t.iconName})))}function ct(e){var t=G('.drop',e);if(t){var n=function(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return['bottom','height','left','right','top','width'].forEach((e=>{void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(N(e,'height'))),n.width||(n.width=parseFloat(N(e,'width'))),n}}(e),r=event.pageX-n.width/2-n.left-window.scrollX,a=event.pageY-n.height/2-n.top-window.scrollY;t.style.top=a+'px',t.style.left=r+'px',B(t,'animate')}}function ft(e,t,n){return function(e,t){if(e!==t)throw new TypeError('Private static access of wrong provenance')}(e,t),n}ot.Defaults=nt;var ht={buttons:[],arrange:!1,scaled:!1,selectable:!1,selectIcon:null},dt=new WeakMap,pt=new WeakMap,vt=new WeakSet,mt=function(e){function t(t){var n;n=e.call(this)||this,vt.add(u(n)),ne(u(n),'buttons',null),dt.set(u(n),{writable:!0,value:ht}),pt.set(u(n),{writable:!0,value:void 0});var r=K.removeOptionsPtoperty('buttons',t,Array);return d(u(n),dt,ee({},ht,t)),n.buttons=r.map((e=>new ot(e))),n}return f(t,e),t.prototype.render=function(){var e=p(this,pt);return e instanceof Element||(d(this,pt,e=this.createEl('div',{className:ft(t,t,gt).call(t,this.options)},{},this.buttons.map((e=>e.render())))),this.options.selectable&&function(e,t,n){if(!t.has(e))throw new TypeError('attempted to get private field on non-instance');return n}(this,vt,yt).call(this,e)),e},l(t,[{key:'options',get:function(){return p(this,dt)}},{key:'arrange',set:function(e){var n=t.getClassName('arrange'),r=p(this,pt),a=p(this,dt);r&&(e?!1===D(r,n)&&B(r,n):$(r,n)),a.arrange=e}},{key:'selected',set:function(e){var n=t.getClassName('selected'),r=this.options;'number'==typeof e&&(e=this.buttons[e]),e instanceof ot&&(this.buttons.forEach((e=>{H(e.element,'data-group-selected'),$(e.element,n)})),B(e.element,n),r.selectIcon&&(e.icon.icon=r.selectIcon,e.options.iconName=r.selectIcon))}}]),t}(K);function gt(e){var t=['button-group'];return e.arrange&&t.push('arrange'),e.scaled&&t.push('scaled'),t}function yt(e){var t=this;e.addEventListener('click',(e=>{var n=e.target.closest('.'+mt.getClassName('button'));t.selected=t.buttons.find((e=>e.element===n))})),e.addEventListener('mouseenter',(e=>{t.$$('.button.selected',e.target).forEach((e=>{!function(e,t,n){e.setAttribute(t,n)}(e,'data-group-selected',!0),$(e,mt.getClassName('selected'))}))})),e.addEventListener('mouseleave',(e=>{t.$$('.button[data-group-selected]',e.target).forEach((e=>{H(e,'data-group-selected'),B(e,mt.getClassName('selected'))}))}))}var wt=new WeakMap,bt=new WeakMap,Et=new WeakMap,kt=new WeakMap,Tt=new WeakMap,Ct=function(e){function t(t,n,r){var a;return a=e.call(this)||this,wt.set(u(a),{writable:!0,value:[]}),ne(u(a),'map',{icons:[],actions:[]}),bt.set(u(a),{writable:!0,value:void 0}),Et.set(u(a),{writable:!0,value:null}),kt.set(u(a),{writable:!0,value:null}),Tt.set(u(a),{writable:!0,value:null}),d(u(a),bt,t),a.map.icons=n,a.map.actions=r,d(u(a),Et,new Ze('none','big')),d(u(a),kt,a.createEl('span',{className:'status-text'})),r.forEach((e=>{ee(e,{data:{task:t}})})),a}f(t,e);var n=t.prototype;return n.render=function(){var e=p(this,wt);return e.length>0||(e.push(p(this,Et).render()),e.push(p(this,kt)),this.map.actions.length>0&&(d(this,Tt,new mt({buttons:this.map.actions,arrange:!1,scaled:!0})),e.push(p(this,Tt).render()))),e},n.refresh=function(e){p(this,kt).innerHTML=p(this,bt).statusText,p(this,Et).icon=this.map.icons[e];var t=p(this,Tt);t&&t.buttons.forEach((t=>{var n,r=null==(n=t.options)?void 0:n.enabledWithStatus;if('function'==typeof r&&(r=r.call(t,e)),Array.isArray(r)){if(0===t.options.enabledWithStatus.length)return;t.disabled=-1===t.options.enabledWithStatus.indexOf(e)}else'boolean'==typeof r&&(t.disabled=r)}))},t}(K);function Nt(e,t,n){return function(e,t){if(e!==t)throw new TypeError('Private static access of wrong provenance')}(e,t),n}var xt={iconPlacement:'default',parts:{status:'refresh.status',title:'title',text:'text',error:'errors','progress-wrapper':'refresh.progress'},progress:{label:'',size:'',barOptions:{labelText:!1}},actions:[]},Ot={};Ot[te.WAIT]='clock',Ot[te.EXEC]='play',Ot[te.ERROR]='warning',Ot[te.DONE]='checked';var At=new WeakMap,Mt=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,At.set(u(t),{writable:!0,value:{}}),t}f(t,e);var n=t.prototype;return n._renderChild=function(e){var n=this,r=p(this,At),a=this.options,i=e.appendChild(this.createEl('div',{className:'detail'})),s=e.appendChild(this.createEl('div',{className:'status-wrapper'}));Object.keys(a.parts).forEach((e=>{var o,l=i,u=null;if('progress-wrapper'===e?a.progress?u=new $e(a.progress):delete a['progress-wrapper']:'status'===e&&(l=s,u=new Ct(n,Ot,a.actions)),r[e]=l.appendChild(n.createEl('div',{className:e},{})),u&&'function'==typeof(null==(o=u)?void 0:o.render)){var c=u.render();c instanceof Element&&(c=[c]),c.forEach((t=>r[e].append(t))),Nt(t,t,St).call(t,r[e],u)}}))},n.refresh=function(t){e.prototype.refresh.call(this,t,p(this,At))},n._buildCssClass=function(){var t=e.prototype._buildCssClass.call(this);return this.options.iconPlacement!==xt.iconPlacement&&t.push('task-item-'+this.options.iconPlacement),t},n._refreshProgress=function(e,n){var r=Nt(t,t,Pt).call(t,e);r instanceof $e&&(r.setLabel(this.getProgressTotal()+'%'),r.setProgress(n))},n._refreshStatus=function(e,n){Nt(t,t,Pt).call(t,e).refresh(n)},n.getTitle=function(){var e,t=this.options.parts.title;return t&&null!=(e=this[t])?e:''},t}(le);function St(e,t){qe.has(e)||qe.set(e,{}),qe.get(e).componet=t}function Pt(e){if(qe.has(e)){var t=qe.get(e);if(void 0!==t.componet)return t.componet}return null}Mt.Defualts=xt;var Wt={linear:function(e){return e},quad:function(e){return Math.pow(e,2)},circ:function(e){return 1-Math.sin(Math.acos(e))},back:function(e,t){return void 0===e&&(e=1.5),Math.pow(t,2)*((e+1)*t-e)}},_t={fadeOut:function(e){this.style.opacity=1-Math.round(100*e)/100},fadeIn:function(e){'none'===this.style.display&&(this.style.display=null),this.style.opacity=Math.round(100*e)/100}};function Rt(e,t){void 0===t&&(t={name:'fadeOut',timing:Wt.linear,duration:500,delay:0});var n=v({},t);if('function'==typeof n.draw)n.draw.bind(e);else{if('string'!=typeof n.name||'function'!=typeof _t[n.name])throw new Error('Unknown animation ');n.draw=_t[n.name].bind(e)}return'number'!=typeof n.delay&&(n.delay=0),n.timing='string'==typeof n.timing&&'function'==typeof Wt[n.timing]?Wt[n.timing]:Wt.linear,new Promise((t=>{setTimeout((()=>{return a=()=>{t(e)},i=(r=n).timing,s=r.draw,o=r.duration,l=performance.now(),void requestAnimationFrame((function e(t){var n=(t-l)/o;n>1&&(n=1);var r=i(n);s(r),n<1?requestAnimationFrame(e):a&&a()}));var r,a,i,s,o,l}),n.delay)}))}function Lt(e,t,n){if(!t.has(e))throw new TypeError('attempted to get private field on non-instance');return n}var jt={common:!1,title:'<h3>Backgrounds tasks</h3>',theme:{'-1':'default'},renderOnEmpty:!0,taskClass:Mt,emptyText:'Tasks not provided yet',taskOptions:{},tasks:[],statusText:{},hideAnimation:{name:'fadeOut',duration:1e3,timing:'linear',delay:0},showAnimation:{name:'fadeIn',duration:1e3,timing:'linear',delay:0},tasksAnimation:{hide:{},show:{}},resolver:{url:'queue-reader'}};jt.tasksAnimation.hide[te.DONE]=ee({},jt.hideAnimation,{delay:5e3}),jt.tasksAnimation.hide[te.ERROR]=ee({},jt.hideAnimation,{delay:2e4}),jt.tasksAnimation.show[te.EXEC]=ee({},jt.showAnimation,{duration:500}),jt.tasksAnimation.show[te.WAIT]=ee({},jt.showAnimation,{duration:500}),jt.tasksAnimation.hide[te.ERROR]=!1,jt.statusText[te.DONE]='Complete',jt.statusText[te.ERROR]='Complete with errors',jt.statusText[te.EXEC]='Processing',jt.statusText[te.WAIT]='Awaiting';var It=new WeakMap,qt=new WeakMap,Ft=new WeakMap,zt=new WeakMap,Dt=new WeakSet,Bt=new WeakSet,$t=new WeakSet,Ht=new WeakSet,Xt=function(e){function t(n){var r;r=e.call(this)||this,Ht.add(u(r)),$t.add(u(r)),Bt.add(u(r)),Dt.add(u(r)),It.set(u(r),{writable:!0,value:null}),qt.set(u(r),{writable:!0,value:{owner:null,wrapper:null,wrapperTasks:null,emptyText:null}}),Ft.set(u(r),{writable:!0,value:[]}),zt.set(u(r),{writable:!0,value:{}}),p(u(r),qt).owner=K.removeOptionsPtoperty('element',n);var a=ee({},t.Defaults,n);return d(u(r),zt,ee({},{taskOptions:a.taskClass.Defualts},a)),d(u(r),It,ke.factory(u(r))),r.render(),n.tasks&&void 0!==n.tasks.length&&r.addTasks(n.tasks),setTimeout((()=>{0===r.getTasks().length&&Lt(u(r),Dt,Gt).call(u(r),'show')}),200),r.trigger(Me.ready,{bubbles:!0}),r}f(t,e);var n=t.prototype;return n.destroy=function(){this.trigger(Me.destroy,{bubbles:!0}),d(this,Ft,[]),this.ownerElement.remove()},n.trigger=function(e,t,n){if(void 0===t&&(t={}),'object'==typeof n){t.detail={};for(var r=0,a=Object.entries(n);r<a.length;r++){var i=a[r],s=i[0],o=i[1];t.detail[s]=o}}return this.ownerElement.dispatchEvent(new je(this,e,t))},n.render=function(){var e=this.getTasks(te.SET_VISIBLE);if(0===e.length&&!1===this.options.renderOnEmpty)return!1;var n=p(this,qt);if(null===n.wrapper){var r=this.options;n.wrapper=n.owner.appendChild(this.createEl('div',{className:'wrapper'})),0===n.wrapper.childNodes.length&&(r.title&&this.options.title.length>0&&n.wrapper.appendChild(this.createEl('div',{innerHTML:this.options.title,className:'title'})),n.wrapperTasks=n.wrapper.appendChild(this.createEl('div',{className:'tasks'})),r.emptyText.length>0&&(n.emptyText=n.wrapper.appendChild(n.emptyText=this.createEl('div',{className:'empty-wrapper',style:{display:'none'}},{},[this.createEl('span',{className:'empty-text',textContent:r.emptyText})])))),'string'==typeof r.theme&&X(n.wrapper,t.getClassName('theme-'+r.theme),t.getClassName('theme'))}return e.forEach((e=>e.refresh())),!0},n.addTasks=function(e,t){var n=this;if(void 0===t&&(t=!0),!1===Array.isArray(e))throw new Error('Not valid call. Argument tasks is not array type ');Lt(this,$t,Vt).call(this,e),d(this,Ft,p(this,Ft).concat(e)),e.forEach((e=>n.trigger(Me.newTask,{bubbles:!0},{task:e}))),Lt(this,Dt,Gt).call(this,'hide').then((()=>{t&&n.resolver.resolve((e=>{e.getTasks().length>0&&e.trigger(Me.fetchStart,{bubbles:!0})}),((e,t)=>{e.trigger(Me.fetchEnd,{bubbles:!0},{requests:t})}))}))},n._updateTask=function(e,t){if(e.progress!==t.progress||e.status!==t.status||e.text!==t.text||e.title!==t.title){var n=e.status!==t.status,r=ee({},e);if((e=ee(e,t)).refresh(r),n){if(e.cssClassSwitch(),this.trigger(Me.statusChange,{bubbles:!0},{task:e,oldStatus:r.status}),te.is(te.SET_VISIBLE,e.status)&&null===e.element.parentNode){var a=e.element;a.style.display='none',this.wrapperTasksElement.append(a),Rt(a,Lt(this,Bt,Ut).call(this,e,'show'))}te.is(te.SET_COMPLETE,e.status)&&this.removeTask(e)}}},n.removeTask=function(e){var t=this;if('number'==typeof e&&(e=this.findTask(e)),e instanceof le){var n=this.getTasks().findIndex((t=>t.id===e.id));if(n>-1)return p(this,Ft).splice(n,1),this.trigger(Me.taskRemoved,{bubbles:!0},{task:e}),e.element.parentNode instanceof Element&&Lt(this,Ht,Yt).call(this,e.element,Lt(this,Bt,Ut).call(this,e)).then((n=>{t.trigger(Me.taskElementRemoved,{bubbles:!0},{task:e,element:n}),0===p(t,Ft).length&&Lt(t,Dt,Gt).call(t,'show')})),!0}return!1},n.getTasks=function(e){var t=p(this,Ft);return e?('number'==typeof e&&(e=[e]),t.filter((t=>{if(e.indexOf(t.status)>-1)return t}))):t},n.findTask=function(e){var t=this.getTasks().find((t=>t.id===e));return t instanceof le?t:null},l(t,[{key:'options',get:function(){return p(this,zt)}},{key:'ownerElement',get:function(){return p(this,qt).owner}},{key:'wrapperElement',get:function(){return p(this,qt).wrapper}},{key:'wrapperTasksElement',get:function(){return p(this,qt).wrapperTasks}},{key:'resolver',get:function(){return p(this,It)}}]),t}(K);function Gt(e){var t=p(this,qt).emptyText,n=function(e){var t;return!1!==q(e)&&0!==(''!==(null==(t=e.style)?void 0:t.opacity)?parseFloat(e.style.opacity):1)&&'hidden'!==N(e,'visibility')&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}(t);if(q(t)){if(n&&'hide'===e||!1===n&&'show'===e)return Rt(t,this.options[e+'Animation']);t.style.display='show'===e?'block':'none'}return Promise.resolve(t)}function Ut(e,t){void 0===t&&(t='hide');var n=this.options;return void 0!==n.tasksAnimation[t][e.status]?n.tasksAnimation[t][e.status]:n[t+'Animation']}function Vt(e){var t=this,n=this.options.taskClass;e.forEach(((r,a)=>{r instanceof le||('object'==typeof r?e[a]=ee(new n(null,t),r):Number.parseInt(r)>0?e[a]=new n(r,t):e.splice(a,1))}))}function Yt(e,t){return void 0===t&&(t=this.options.hideAnimation),!1!==t?Rt(e,t).then((e=>(e.remove(),e))):Promise.resolve(!1)}K.classPrefix='qmc-',Xt.TaskAbstract=le,Xt.Button=ot,Xt.ButtonsGroup=mt,Xt.Icon=Ze,Xt.Defaults=jt,Xt.Events=Me,Xt.Statuses=te,a.default.fn.queueManager=function(e){var t=this.data('queue-manager'),n={init:function(e){return this.each(((t,n)=>{var r=a.default(n);r.data('queueManager')||r.data('queueManager',new Xt(a.default.extend(!0,{element:r.get(0)},Xt.Defaults,e||{},r.data('manager')||{})))})),this},createButtons:function(e,n){(n=n||this).append(a.default(new Xt.ButtonsGroup(e).render()).data('manager',t))}};return t instanceof Xt&&'function'==typeof t[e]?t[e].apply(t,Array.prototype.slice.call(arguments,1)):n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):'object'!=typeof e&&e?(a.default.error('Method '+e+' does not exist on queueManager '),!1):n.init.apply(this,arguments)},a.default.fn.queueManager.Manager=Xt,a.default('document').ready((()=>{a.default('.qmc-queue-manager[data-manager]').queueManager()}))}(window.jQuery,document,window);
